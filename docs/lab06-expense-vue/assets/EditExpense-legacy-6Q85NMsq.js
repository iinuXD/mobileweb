System.register(["./index-legacy-DzUnrhLs.js","./firebase-legacy-CYdF3jP9.js","./_plugin-vue_export-helper-legacy-BVIICed7.js"],function(e,l){"use strict";var a,t,n,u,o,s,d,r,c,i,p,m,f,v,b,_,g,y,h,x,V,w,E,U,C,j,k,A,I,N,$,z,B,D,G,H,J;return{setters:[e=>{a=e.d,t=e.o,n=e.M,u=e.c,o=e.w,s=e.u,d=e.I,r=e.O,c=e.N,i=e.A,p=e.b,m=e.e,f=e.h,v=e.G,b=e.f,_=e.g,g=e.i,y=e.j,h=e.P,x=e.l,V=e.C,w=e.H,E=e.D,U=e.J,C=e.K,j=e.L,k=e.z,A=e.Q,I=e.B},e=>{N=e.b,$=e.s,z=e.f,B=e.d,D=e.g,G=e.u,H=e.h},e=>{J=e._}],execute:function(){var l=document.createElement("style");l.textContent="ion-item[data-v-d0996f29]{margin-bottom:12px}\n/*$vite$:1*/",document.head.appendChild(l),e("default",J(a({__name:"EditExpense",setup(e){const l=r(),a=c(),J=l.params.id,K=i(""),L=i(null),M=i("expense"),O=i(""),P=i("");t(async()=>{try{N.currentUser||await $(N)}catch(e){console.error("Auth failed:",e)}await Q()});const Q=async()=>{try{const e=z(B,"expenses",J),l=await D(e);if(l.exists()){const e=l.data();K.value=e.title||"",L.value=e.amount||0,M.value=e.type||"expense",O.value=e.category||"",P.value=e.note||""}else F("ไม่พบข้อมูล"),a.push("/tabs/tab1")}catch(e){console.error("Error loading expense:",e),F("เกิดข้อผิดพลาดในการโหลดข้อมูล")}},S=async()=>{if(K.value.trim())if(!L.value||L.value<=0)F("กรุณากรอกจำนวนเงิน");else if(O.value.trim())try{const e=z(B,"expenses",J);await G(e,{title:K.value,amount:Number(L.value),type:M.value,category:O.value,note:P.value}),F("บันทึกการแก้ไขสำเร็จ"),a.push("/tabs/tab1")}catch(e){console.error("Error updating expense:",e);const l=(null==e?void 0:e.message)||"เกิดข้อผิดพลาดในการบันทึกข้อมูล";F(l)}else F("กรุณากรอกหมวดหมู่");else F("กรุณากรอกชื่อรายการ")},q=async()=>{const e=await A.create({header:"ยืนยันการลบ",message:"คุณต้องการลบรายการนี้หรือไม่?",buttons:[{text:"ยกเลิก",role:"cancel"},{text:"ลบ",role:"destructive",handler:async()=>{try{const e=z(B,"expenses",J);await H(e),F("ลบรายการสำเร็จ"),a.push("/tabs/tab1")}catch(e){console.error("Error deleting expense:",e),F("เกิดข้อผิดพลาดในการลบข้อมูล")}}}]});await e.present()},F=async e=>{const l=await n.create({message:e,duration:2e3,position:"bottom"});await l.present()};return(e,l)=>(I(),u(s(d),null,{default:o(()=>[p(s(x),null,{default:o(()=>[p(s(m),null,{default:o(()=>[p(s(f),{slot:"start"},{default:o(()=>[p(s(v),{"default-href":"/tabs/tab1"})]),_:1}),p(s(b),null,{default:o(()=>[...l[5]||(l[5]=[_("แก้ไขรายการ",-1)])]),_:1}),p(s(f),{slot:"end"},{default:o(()=>[p(s(g),{onClick:q,color:"danger"},{default:o(()=>[p(s(y),{slot:"icon-only",icon:s(h)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),p(s(k),{class:"ion-padding"},{default:o(()=>[p(s(V),null,{default:o(()=>[p(s(w),{label:"ชื่อรายการ","label-placement":"floating",placeholder:"กรอกชื่อรายการ",modelValue:K.value,"onUpdate:modelValue":l[0]||(l[0]=e=>K.value=e)},null,8,["modelValue"])]),_:1}),p(s(V),null,{default:o(()=>[p(s(w),{label:"จำนวนเงิน","label-placement":"floating",type:"number",placeholder:"0",modelValue:L.value,"onUpdate:modelValue":l[1]||(l[1]=e=>L.value=e)},null,8,["modelValue"])]),_:1}),p(s(V),null,{default:o(()=>[p(s(E),null,{default:o(()=>[...l[6]||(l[6]=[_("ประเภท",-1)])]),_:1}),p(s(U),{modelValue:M.value,"onUpdate:modelValue":l[2]||(l[2]=e=>M.value=e),interface:"popover"},{default:o(()=>[p(s(C),{value:"income"},{default:o(()=>[...l[7]||(l[7]=[_("รายรับ",-1)])]),_:1}),p(s(C),{value:"expense"},{default:o(()=>[...l[8]||(l[8]=[_("รายจ่าย",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),p(s(V),null,{default:o(()=>[p(s(w),{label:"หมวดหมู่","label-placement":"floating",placeholder:"เช่น อาหาร, ค่าน้ำ, เงินเดือน",modelValue:O.value,"onUpdate:modelValue":l[3]||(l[3]=e=>O.value=e)},null,8,["modelValue"])]),_:1}),p(s(V),null,{default:o(()=>[p(s(j),{label:"หมายเหตุ","label-placement":"floating",placeholder:"เพิ่มเติม (ไม่บังคับ)",rows:4,modelValue:P.value,"onUpdate:modelValue":l[4]||(l[4]=e=>P.value=e)},null,8,["modelValue"])]),_:1}),p(s(g),{expand:"block",onClick:S,class:"ion-margin-top"},{default:o(()=>[...l[9]||(l[9]=[_(" บันทึกการแก้ไข ",-1)])]),_:1})]),_:1})]),_:1}))}}),[["__scopeId","data-v-d0996f29"]]))}}});
